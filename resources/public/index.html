<!doctype html>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!-- Consider adding a manifest.appcache: h5bp.com/d/Offline -->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">

  <!-- Use the .htaccess and remove these lines to avoid edge case issues.
       More info: h5bp.com/i/378 -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title></title>
  <meta name="description" content="">

  <!-- Mobile viewport optimized: h5bp.com/viewport -->
  <meta name="viewport" content="width=device-width">

  <!-- Place favicon.ico and apple-touch-icon.png in the root directory: mathiasbynens.be/notes/touch-icons -->
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/chosen.css">
  <link rel="stylesheet" href="css/jquery.continuous-calendar.css">
  <link rel="stylesheet" href="css/ontrail.css">
  <link rel="stylesheet" href="redactor/redactor.css">
  <link href='http://fonts.googleapis.com/css?family=Nosifer&subset=latin-ext' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Audiowide&subset=latin-ext' rel='stylesheet' type='text/css'>

  <!-- More ideas for your <head> here: h5bp.com/d/head-Tips -->

  <!-- All JavaScript at the bottom, except this Modernizr build.
       Modernizr enables HTML5 elements & feature detects for optimal performance.
       Create your own custom Modernizr build: www.modernizr.com/download/ -->
  <script src="js/libs/modernizr-2.5.3.min.js"></script>

  <!-- ga / jro -->
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-34593654-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
</head>
<body class="logged-out">
  <style id="logged-in-styles" type="text/css"></style>
  <header role="top">
    <h1>On Trail</h1>
    <div id="menu" role="menu">
      <ul>
        <li><a class="pageLink" id="exercises" rel="latest">Kaikki lenkit</a></li>
        <li class="right login">
          <a class="pageLink logged-out" rel="register">Luo tunnus</a>
            <a class="logged-out" id="login-link">Kirjaudu sisään</a>
          <a class="pageLink logged-in" id="logout" rel="latest">Kirjaudu ulos</a>
          <form id="login-form" method="post">
            <input id="username" name="username" type="text" placeholder="Username" />
            <input id="password" name="password" type="password" placeholder="Password"/>
            <a id="login" class="button login">Sisään</a>
          </form>
        </li>
      </ul>
    </div>
  </header>
  <div class="content-area">
    <aside>
      <div>
        <header>
          <div class="logged-in">
            <h2>Omat toiminnot</h2>
	    <p>
	      <a class="pageLink" rel="addex">Lisää lenkki</a><br/>
	      <a class="pageLink" rel="user" id="my-page">Omat lenkit</a><br/>
	      <a class="pageLink" rel="profile">Oma profiili</a><br/>
	      <a class="pageLink" rel="summary">Selaa yhteenvetoja</a><br/>
	      <a class="pageLink" rel="tagsummary">Tagit</a><br/>
	    </p>
	    <h2>Muut</h2>
	    <p>
	      <a class="pageLink" rel="users">Etsi käyttäjiä</a><br/>
	      <a class="pageLink" rel="systemstats">Ontrail palvelin</a><br/>
            </p>
            <p></p>
          </div>
          <h3>Kehittäjille</h3>
	  <small>
	  <p><a href="https://www.github.com/jrosti/ontrail">Lähdekoodi</a>,
	  <a href="https://www.github.com/jrosti/ontrail/issues">bugilistaus.</a>
	  ja <a href="https://github.com/jrosti/ontrail/blob/master/README.md">toiveiden tynnyri.</a></p>
	  <p>Palvelu on testivaiheessa ja sitä pävitetään
          säännöllisesti. Viimeisimmän päivityksen ajankohdan näkee "Ontrail-palvelin" linkistä.</p>
          <p>Palvelu on testattu parhaiten Chromella, versio 22+. Muita
      selaimia aktiivisessa käytössä tällä hetkellä: Firefox 15+,
          Safari 6.0 ja iOS6 iPhone iPad.</p>
	  </small>
        </header>
      </div>
    </aside>
    <section role="latest">
      <article>
        <label for="search">Etsi lenkeistä: </label> <input class="search" type="text" id="search"/>
      </article>
      <div id="entries"></div>
    </section>

    <section role="systemstats">
      <article>
      <h3>Ontrail palvelimen tiedot</h3>
      <p>
        Muistia käytössä: <span id="sysheap"></span><br/>
        Muistia varattu: <span id="sysmaxHeap"></span><br/>
        Uptime: <span id="sysuptime"></span><br/>
        Harjoituksia: <span id="sysexs"></span><br/>
        Käyttäjiä: <span id="sysusers"></span><br/>
      </p>
      </article>
    </section>
      
    <section role="profile">
      <article>
      <h2><a href="http://www.gravatar.com"><img id="profile-avatar" /></a>  Oma profiili</h2>
      <div class="details">
	<h3>Henkilökohtaiset tiedot <sup><tiny>*)</tiny></sup></h3>
	<div class="edit-form">
	  Sähköposti: <span id="profile-email"></span>
	  <div><i><small>Vaihda avatarta <a href="http://www.gravatar.com">Gravatar
      -palvelun avulla</a> käyttäen
      sähköpostiosoitettasi. Sähköpostiosoitetta voi muokata vain
      ylläpitäjän pyynnostä.</small></i></div> 
	</div>
	<div>
	  <small>*) Henkilökohtaiset tiedot näkyvät vain sinulle</small>
	</div>
	<h3>Syketiedot</h3>
	<form id="profile-form" class="edit-form" method="post">
        <div>
	  <label for="resthr">Leposyke</label>
	  <input id="resthr" name="resthr" type="text" maxlength="3" size="3" placeholder="Leposyke" />
        </div>
	<div>
          <label for="maxhr">Maksimisyke</label>
	  <input id="maxhr" name="maxhr" type="text" maxlength="3" size="3" placeholder="Maksimisyke"/>
	</div>
	<div>
	  <label for="aerk">Aerobinen kynnys</label>
	  <input id="aerk" name="aerk" type="text"  maxlength="3" size="3" placeholder="Aerobinen kynnnys" />
        </div>
        <div>
          <label for="anaerk">Anaerobinen kynnys</label>
          <input id="anaerk" name="anaerk" type="text"  maxlength="3" size="3" placeholder="Anaerobinen kynnnys" />
        </div>
        <div>
          <label></label>
          <a id="update-profile" class="button login">Päivitä syketiedot</a>
        </div>
      </form>
	<span id="profile-result"></span>
      </div>
      </article>
    </section>

    <section role="content">
      <div id="content-header"></div>
      <div id="content-entries"></div>
    </section>

    <section role="summary">
      <div id="summary-header"></div>
      <div id="summary-entries"></div>
    </section>

    <section role="tagsummary">
      <div id="tagsummary-header"></div>
      <div id="tagsummary-entries"></div>
    </section>


    <section role="users">
      <article>
        <label for="search-users">Hae käyttäjää: </label> <input class="search" type="text" id="search-users"/>
        <div id="user-results"></div>
      </article>
    </section>

    <section role="ex" class="full with-comments">
      <div id="exercise"></div>
    </section>

    <section role="addex" data-mode="add">
      <article class="edit-form">
        <h2>Lisää uusi lenkki</h2>
        <form id="add-exercise-form" method="post">
          <div>
            <label>Otsikko</label>
            <input id="ex-title" name="title" class="reset" placeholder="Otsikko"/>
            <em class="error title-required">Lisää otsikko</em>
          </div>
          <div>
            <label>Laji</label>
            <select id="ex-sport" name="sport" data-placeholder="Juoksu" class="chzn-select" style="width:350px;">
            </select>
          </div>
          <div>
            <label>Kesto</label>
            <input id="ex-duration" name="duration" class="reset"
      placeholder="Kesto (esim  3h31, 3.31.28)"/><span id="duration-hint"></span>
            <em class="error duration-required">Lenkin kesto vaaditaan</em>
            <em class="error invalid-duration">Lenkin kesto on virheellistä muotoa</em>
          </div>
          <div>
            <label>Matka</label>
            <input id="ex-distance" name="distance" class="reset"
      placeholder="Matka (esim 2km, 3250m)"/>
          </div>
          <div>
            <label>Keskisyke</label>
            <input id="ex-avghr" name="avghr" class="reset" placeholder="Keskisyke"/>
          </div>
          <div>
            <label>Päivä</label>
              <div id="ex-continuous-date">
                <input style="display: none ! important" id="ex-date" name="date" placeholder="Milloin?"/>
              </div>
          </div>
          <div id="add-tags-select">
            <label>Tagit</label>
            <select id="ex-tags" data-placeholder="Lisää tageja..." multiple class="chzn-select" style="width:350px;">
            </select>
          </div>
          <div>
          <div>
            <label>Kuvaus</label>
            <div id="ex-body"></div>
          </div>
          <div>
            <label></label>
            <a id="add-exercise" class="button addExercise add">Lisää lenkki</a>
            <a id="edit-exercise" class="button editExercise edit">Muokkaa lenkkiä</a>
          </div>
        </form>
      </article>
    </section>

    <section role="register" data-mode="add">
      <article class="edit-form">
        <h2>Rekisteröidy käyttäjäksi</h2>
        <form id="register-form" method="post">
          <div>
            <label>Käyttäjätunnus</label>
            <input id="ex-username" name="username" class="reset" placeholder="Käyttäjätunnus"/>
            <em class="error username-required">Käyttäjätunnus vaaditaan</em>
            <em class="error user-exists">Tunnus on jo käytössä</em>
          </div>
          <div>
            <label>Salasana</label>
            <input id="ex-password" name="password" class="reset" type="password" placeholder="Salasana"/>
            <em class="error password-required">Salasana vaaditaan</em>
            <em class="error password-too-short">Salasanassa pitää olla vähintään kuusi merkkiä</em>
          </div>
          <div>
            <label>Salasana uudelleen</label>
            <input id="ex-password2" class="reset" type="password" placeholder="Salasana uudelleen"/>
            <em class="error passwords-do-not-match">Salasanat eivät vastaa toisiaan</em>
          </div>
          <div>
            <label>Sähköpostiosoite</label>
            <input id="ex-email" name="email" class="reset" placeholder="Sähköpostiosoite"/>
            <em class="error email-invalid">Sähköpostiosoite vaaditaan</em>
          </div>
          <div>
              <label></label>
              <a id="register-user" class="button register">Rekisteröidy</a>
            </div>
        </form>
      </article>
    </section>

    <footer>
    </footer>

  </div>


  <!-- JavaScript at the bottom for fast page loading -->

  <!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if offline -->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
  <script src="js/jquery.chosen.0.9.8.min.js"></script>
  <script src="js/jquery.cookie.js"></script>
  <script src="js/jquery.md5.js"></script>
  <script src="js/jquery.address-1.5-30680d.min.js?strict=false"></script>
  <script src="js/icanhaz-0.10.0.js"></script>
  <script src="js/lodash-0.5.2.js"></script>
  <script src="js/xdate-0.7.js"></script>
  <script src="js/rx.min.js"></script>
  <script src="js/rx.time.min.js"></script>
  <script src="js/rx.jquery.min.js"></script>
  <script src="js/rx.ontrail.js"></script>
  <script src="js/rx.ontrail.jquery.js"></script>
  <script src="js/rx.ontrail.backend.js"></script>
  <script src="js/rx.ontrail.validation.js"></script>
  <script src="js/rx.ontrail.pager.js"></script>
  <script src="js/rx.ontrail.session.js"></script>
  <script src="js/jquery.continuous-calendar.js"></script>
  <script src="redactor/redactor.min.js"></script>

  <!-- scripts concatenated and minified via build script -->
  <script src="js/plugins.js"></script>
  <script src="js/script.js"></script>

  <!-- end scripts -->

</body>
<script id="exerciseDetailsTemplate" class="partial" type="text/html">
  <table class="details full">
    <thead><tr><th>Laji</th><th>Matka</th><th>Aika</th><th>Vauhti</th><th>Syke</th><th>Syke-%</th><th>Etenemä</th></tr></thead>
    <tr>
      <td>{{sport}}</td><td>{{distance}}</td><td>{{duration}}</td> <td>{{pace}}</td>
      <td>{{avghr}}</td><td>{{hrReserve}}</td><td>{{bpmdist}}</td>
    </tr>
  </table>
</script>
<script id="tagsExpandedTemplate" class="partial" type="text/html">
  <div class="full">
    <ul>
      {{#tags}}<li><a class="pageLink" rel="tag-{{.}}">{{.}}</a></li> {{/tags}}
    </ul>
  </div>
</script>
<script id="exerciseTemplate" type="text/html">
  <article data-id="{{id}}" class="preview exercise {{sport}}">
    <!-- <a class="delete" rel="ex-{{id}}" data-user="{{user}}">Poista</a> -->
    <img class="avatar" src="{{avatar}}" width="48" height="48"><h2><a class="more" rel="ex-{{id}}">{{title}}</a></h2>
    <h4 class="full"><span class="date">{{date}}</span><a class="pageLink" rel="user-{{user}}">{{user}}</a></h4>
    <h4 class="preview"><span class="date">{{date}}</span> <a class="pageLink" rel="user-{{user}}">{{user}}</a>
    {{did}} {{#distance}} {{distance}} ajassa {{duration}}{{/distance}} {{^distance}} {{duration}}{{/distance}}</h4>
    {{> exerciseDetailsTemplate}}
    
    <div class="preview">{{#trunc}}{{/trunc}} 
    <a class="pageLink" rel="ex-{{id}}">{{^newComments}}{{commentCount}} kommenttia.</a></div> {{/newComments}}
    {{#newComments}}{{commentCount}} kommenttia, {{newComments}} uutta.{{/newComments}}</a></div> 
    <div class="full">{{{body}}}</div>
    {{> tagsExpandedTemplate}}
    <p class="full"><a class="pageLink" rel="ex-{{id}}">{{^newComments}}{{commentCount}} kommenttia.</a></div> {{/newComments}}
    {{#newComments}}{{commentCount}} kommenttia, {{newComments}} uutta.{{/newComments}}</a></p>
  </article>
</script>

<script id="singleExerciseTemplate" type="text/html">
  <article data-id="{{id}}" class="full exercise {{sport}}">
    <a class="delete" rel="ex-{{id}}" data-user="{{user}}">Poista</a>
    <a class="pageLink" id="modify-ex" rel="addex-{{id}}" data-user="{{user}}">muokkaa</a>
    <img class="avatar" src="{{avatar}}"  width="48" height="48"><h2>{{title}}</h2>
    <h4><span class="date">{{date}}</span><a class="pageLink" rel="user-{{user}}">{{user}}</a></h4>
    {{> exerciseDetailsTemplate}}
    <div>{{{body}}}</div>
    {{> tagsExpandedTemplate}}
  </article>
    <h3>Kommentit:</h3>
    {{#comments}}
      <article class="comment" data-id="{{id}}">
        {{#deleteComment}}<a class="delete-comment button" rel="{{deleteRel}}" data-user="{{user}}">Poista</a>{{/deleteComment}}
        <img class="avatar" src="{{avatar}}"  width="24" height="24">
        <h4><span class="date">{{date}}</span><a class="pageLink" rel="user-{{user}}">{{user}}</a></h4>
        <div>{{{body}}}</div>
      </article>
      {{/comments}}
    </div>
    <article class="logged-in">
      <h4>Jätä oma kommenttisi</h4>
      {{^comments}}
      <p>Kirjoita ensimmäinen kommentti</p>
      {{/comments}}
      <form class=" edit-form" id="add-comment-form" method="post">
        <div>
          <label>Kommenttisi</label>
          <div id="comment-body"></div>
        </div>
        <div>
          <label> </label>
          <a id="add-comment" class="button addComment">Kommentoi</a>
        </div>
      </form>
    </article>
    <article class="logged-out">
      Kirjaudu sisään kommentoidaksesi.
    </article>
</script>

<script id="sportsCreateTemplate" type="text/html">
  <option value="Juoksu">Juoksu</option>
  {{#sports}}
    <option value="{{.}}">{{.}}</option>
  {{/sports}}
</script>
<script id="tagsCreateTemplate" type="text/html">
  {{#tags}}
  <option value="{{.}}">{{.}}</option>
  {{/tags}}
</script>
<script id="usersCreateTemplate" type="text/html">
  {{#users}}
  <img class="avatar" src="{{avatar}}"  width="24" height="24">
  <h4><a class="pageLink" rel="user-{{user}}">{{user}}</a></h4>
  {{/users}}
</script>
<script id="userHeaderTemplate" type="text/html">
  <h2>Käyttäjän {{data}} lenkit</h2>
  <p><a class="pageLink" rel="summary-{{data}}">Yhteenvedot</a></p>
</script>
<script id="tagHeaderTemplate" type="text/html">
  <h2>Tageihin "{{data}}" liittyvät lenkit</h2>
</script>
<script id="hpkHeaderTemplate" type="text/html">
  <div class="subnavi">
    <a class="pageLink" data-filter="" rel="{{kind}}-{{user}}">Kaikki</a>
    <a class="pageLink by-year" data-filter="by-year" rel="{{kind}}-{{user}}-{{year}}">Vuosi</a>
    <a class="pageLink by-month" data-filter="by-month" rel="{{kind}}-{{user}}-{{year}}-bymonth">Kuukausi</a>
  </div>
  <h2>Yhteenveto harjoituksista</h2>
</script>

<script id="hpkContentTemplate" type="text/html">
  <article>
    <div class="by year">
      <a class="pageLink prev" rel="{{kind}}-{{user}}-{{prevYear}}">&larr;</a>
      {{year}}
      {{#hasNextYear}}<a class="pageLink next" rel="{{kind}}-{{user}}-{{nextYear}}">&rarr;</a> {{/hasNextYear}}
    </div>
    {{> summaryTemplate}}
  </article>
</script>

<script id="summaryTemplate" type="text/html">
    <table id="homies" class="details">
      <thead><tr><th>Laji</th><th>Matka</th><th>Vauhti</th></th><th>Aika</th><th>Syke</th><th>Kertoja</th></tr></thead>
      <tbody>
      {{#sports}}
      {{> summaryItemTemplate}}
      {{/sports}}
      </tbody>
    </table>
</script>

<script id="hpkMonthContentTemplate" type="text/html">
  <article>
    <div class="by month">
      <a class="pageLink prev" rel="{{kind}}-{{user}}-{{prevYear}}-bymonth">&larr;</a>
      Vuosi {{year}}
      {{#hasNextYear}}<a class="pageLink next" rel="{{kind}}-{{user}}-{{nextYear}}-bymonth">&rarr;</a> {{/hasNextYear}}
    </div>
    {{#months}}
    <h2 class="monthName">{{monthName}}</h2>
    {{> summaryTemplate}}
    {{/months}}
  </article>
</script>

<script id="summaryItemTemplate" type="text/html">
  <tr><td>{{sport}}</td><td>{{distance}}</td> <td>{{pace}}</td><td>{{duration}}</td><td>{{avghr}}</td><td>{{count}}</td>
</script>

<script id="loggedInStylesTemplate" type="text/html">
  <style id="logged-in-styles" type="text/css">
    a.delete, #modify-ex {
      visibility: hidden;
    }
    a[data-user="{{user}}"].delete {
      visibility: visible;
    }
    #modify-ex[data-user="{{user}}"] {
      visibility: visible;
      vertical-align: baseline;
    }
    body[data-page="user"] a[rel="user-{{user}}"] {
      font-weight: bold;
    }
  </style>
</script>
<body
</html>
