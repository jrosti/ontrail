<!doctype html>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!-- Consider adding a manifest.appcache: h5bp.com/d/Offline -->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">

  <!-- Use the .htaccess and remove these lines to avoid edge case issues.
       More info: h5bp.com/i/378 -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title></title>
  <meta name="description" content="">

  <!-- Mobile viewport optimized: h5bp.com/viewport -->
  <meta name="viewport" content="width=device-width">

  <!-- Place favicon.ico and apple-touch-icon.png in the root directory: mathiasbynens.be/notes/touch-icons -->
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/chosen.css">
  <link rel="stylesheet" href="css/jquery.continuous-calendar.css">
  <link rel="stylesheet" href="css/ontrail.css">
  <link href='http://fonts.googleapis.com/css?family=Nosifer&subset=latin-ext' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Audiowide&subset=latin-ext' rel='stylesheet' type='text/css'>

  <!-- More ideas for your <head> here: h5bp.com/d/head-Tips -->

  <!-- All JavaScript at the bottom, except this Modernizr build.
       Modernizr enables HTML5 elements & feature detects for optimal performance.
       Create your own custom Modernizr build: www.modernizr.com/download/ -->
  <script src="js/libs/modernizr-2.5.3.min.js"></script>

  <!-- ga / jro -->
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-34593654-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
</head>
<body class="logged-out">
  <style id="logged-in-styles" type="text/css"></style>
  <header role="top">
    <h1>On Trail</h1>
    <div id="menu" role="menu">
      <ul>
        <li><a class="pageLink" id="exercises" rel="latest">Kaikki lenkit</a></li>
        <li class="right login">
          <a class="logged-out" id="login-link">Kirjaudu sisään</a>
          <a class="pageLink logged-in" id="logout" rel="latest">Kirjaudu ulos</a>
          <form id="login-form" method="post">
            <input id="username" name="username" type="text" placeholder="Username" />
            <input id="password" name="password" type="password" placeholder="Password"/>
            <input id="login" type="button" value="Sisään"/>
          </form>
        </li>
      </ul>
    </div>
  </header>
  <div class="content-area">
    <aside>
      <div>
        <header>
          <div class="logged-in">
            <h2>Omat toiminnot</h2>
	    <p>
	      <a class="pageLink" rel="addex">Lisää lenkki</a><br/>
	      <a class="pageLink" rel="user" id="my-page">Omat lenkit</a><br/>
	      <a class="pageLink" rel="profile">Oma profiili</a><br/>
              <a class="pageLink" rel="home">Selaa harjoituspäiväkirjaa</a><br/>
            </p>
	    <h2>Muut</h2>
	    <p>
	      <a class="pageLink" rel="tbd">Etsi käyttäjiä</a><br/>
	      <a class="pageLink" rel="tbd">Tilastot</a><br/>
	      <a class="pageLink" rel="tbd">Kunniataulukot</a><br/>
            </p>
            <p></p>
          </div>
          <h3>Kehittäjille</h3>
	  <small>
          <p>Palvelua kehitetään Chromella, versio 22+</p>
	  <p>Toimivia selaimia testattuna tällä hetkellä: Firefox 15+, Safari 6.0, iOS6 iPhone iPad</p>
	  <p>Lähdekoodi <a href="https://www.github.com/jrosti/ontrail">githubissa</a></p>
	  </small>
        </header>
      </div>
    </aside>
    <section role="latest">
      <article>
        <label for="search">Etsi lenkeistä: </label> <input type="text" width="40" id="search">
      </article>
      <div id="entries"></div>
    </section>

    <section role="profile">
      <h2>Käyttäjän profiili.</h2>
      <p>Profiilin tiedot ja muokkaus</p>
    </section>

    <section role="tbd">
      <h2>Tekeillä.</h2>
    </section>
      
    <section role="user">
      <h2>Käyttäjän <span class="current-username"></span> lenkit</h2>
      <div id="user-entries"></div>
    </section>

    <section role="home">
      <article>
        <u>Kaikki</u> Vuosi Kuukausi Viikko
        <h2>Yhteenveto harjoituksista</h2>
        <p></p>
      <table id="homies" class="details">
        <thead><tr><th>Laji</th><th>Matka</th><th>Vauhti</th></th><th>Aika</th><th>Syke</th><th>Kertoja</th></tr></thead>
        <tbody></tbody>
      </table>
      </article>
    </section>

    <section role="addex">
      <article class="edit-form">
        <h2>Lisää uusi lenkki</h2>
        <form id="add-exercise-form" method="post">
          <div>
            <label>Otsikko</label>
            <input id="ex-title" name="title" class="reset" placeholder="Otsikko"/>
            <em class="error title-required">Lisää otsikko</em>
          </div>
          <div>
            <label>Laji</label>
            <select id="ex-sport" name="sport" data-placeholder="Juoksu" class="chzn-select" style="width:350px;">
            </select>
          </div>
          <div>
            <label>Kesto</label>
            <input id="ex-duration" name="duration" class="reset"
      placeholder="Kesto (esim  3h31, 3.31.28)"/><span id="duration-hint"></span>
            <em class="error duration-required">Lenkin kesto vaaditaan</em>
            <em class="error invalid-duration">Lenkin kesto on virheellistä muotoa</em>
          </div>
          <div>
            <label>Matka</label>
            <input id="ex-distance" name="distance" class="reset"
      placeholder="Matka (esim 2km, 3250m)"/>
          </div>
          <div>
            <label>Keskisyke</label>
            <input id="ex-avghr" name="avghr" class="reset" placeholder="Keskisyke"/>
          </div>
          <div>
            <label>Päivä</label>
              <div id="ex-continuous-date">
                <input style="display: none ! important" id="ex-date" name="date" placeholder="Milloin?"/>
              </div>
          </div>
          <div id="add-tags-select">
            <label>Tagit</label>
            <select id="ex-tags" data-placeholder="Lisää tageja..." multiple class="chzn-select" style="width:350px;">
            </select>
          </div>
          <div>
          <div>
            <label>Kuvaus</label>
            <textarea id="ex-body" name="body"class="reset" placeholder="Kerro jotain urheilustasi!"></textarea>
          </div>
          <div>
            <label></label>
            <a id="add-exercise" class="button addExercise">Lisää lenkki</a>
          </div>
        </form>
      </article>
    </section>

    <section role="ex" class="full with-comments">
      <div id="exercise"></div>
    </section>

    <section role="tag">
      <article>
        <h2>Tagiin "<span class="current-tag"></span>" liittyvät lenkit</h2>
      </article>

      <div id="tag-entries"></div>
    </section>
    <footer>
    </footer>

  </div>


  <!-- JavaScript at the bottom for fast page loading -->

  <!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if offline -->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
  <script src="js/jquery.chosen.0.9.8.min.js"></script>
  <script src="js/jquery.cookie.js"></script>
  <script src="js/jquery.md5.js"></script>
  <script src="js/icanhaz-0.10.0.js"></script>
  <script src="js/lodash-0.5.2.js"></script>
  <script src="js/xdate-0.7.js"></script>
  <script src="js/rx.min.js"></script>
  <script src="js/rx.time.min.js"></script>
  <script src="js/rx.jquery.min.js"></script>
  <script src="js/rx.ontrail.js"></script>
  <script src="js/rx.ontrail.backend.js"></script>
  <script src="js/rx.ontrail.validation.js"></script>
  <script src="js/rx.ontrail.pager.js"></script>
  <script src="js/rx.ontrail.session.js"></script>
  <script src="js/jquery.continuous-calendar.js"></script>

  <!-- scripts concatenated and minified via build script -->
  <script src="js/plugins.js"></script>
  <script src="js/script.js"></script>

  <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
  <!-- end scripts -->

</body>
<script id="exerciseDetailsTemplate" class="partial" type="text/html">
  <table class="details full">
    <thead><tr><th>Laji</th><th>Matka</th><th>Vauhti</th><th>Aika</th><th>Syke</th><th>Syke-%</th></tr></thead>
    <tr>
      <td>{{sport}}</td><td>{{distance}}</td> <td>{{pace}}</td>
      <td>{{duration}}</td><td>{{avghr}}</td><td>{{hrReserve}}</td>
    </tr>
  </table>
</script>
<script id="tagsExpandedTemplate" class="partial" type="text/html">
  <div class="full">
    <ul>
      {{#tags}}<li><a class="pageLink" rel="tag-{{.}}">{{.}}</a></li> {{/tags}}
    </ul>
  </div>
</script>
<script id="exerciseTemplate" type="text/html">
  <article data-id="{{id}}" class="preview exercise {{sport}}">
    <a class="delete button" rel="ex-{{id}}" data-user="{{user}}">Poista</a>
    <img class="avatar" src="{{avatar}}" width="48" height="48"><h2><a class="more" rel="ex-{{id}}">{{title}}</a></h2>
    <h4 class="full"><span class="date">{{date}}</span><a class="pageLink" rel="user-{{user}}">{{user}}</a></h4>
    <h4 class="preview"><span class="date">{{date}}</span> <a class="pageLink" rel="user-{{user}}">{{user}}</a>
    {{did}} {{#distance}} {{distance}} ajassa {{duration}}{{/distance}} {{^distance}} {{duration}}{{/distance}}</h4>
    {{> exerciseDetailsTemplate}}
    <div class="preview">{{#trunc}} {{{body}}} {{/trunc}} <a class="pageLink" rel="ex-{{id}}">{{commentCount}} kommenttia</a>.</div>
    <div class="full">{{{body}}}</div>
    {{> tagsExpandedTemplate}}
    <p class="full"><a class="pageLink" rel="ex-{{id}}">Lue lenkki: {{commentCount}} kommenttia</a>.</p>
  </article>
</script>

<script id="singleExerciseTemplate" type="text/html">
  <article data-id="{{id}}" class="full exercise {{sport}}">
    <a class="delete button" rel="ex-{{id}}" data-user="{{user}}">Poista</a>
    <img class="avatar" src="{{avatar}}"  width="48" height="48"><h2>{{title}}</h2>
    <h4><span class="date">{{date}}</span><a class="pageLink" rel="user-{{user}}">{{user}}</a></h4>
    {{> exerciseDetailsTemplate}}
    <div>{{{body}}}</div>
    {{> tagsExpandedTemplate}}
  </article>
    <h3>Kommentit:</h3>
      {{#comments}}
      <article class="comment" data-id="{{id}}">
<!--        <span class="delete button"><a class="delete" rel="comment-{{id}}" data-user="{{user}}">Poista</a></span> -->
        <img class="avatar" src="{{avatar}}"  width="48" height="48"><h2>{{title}}</h2>
        <h4><span class="date">{{date}}</span><a class="pageLink" rel="user-{{user}}">{{user}}</a></h4>
        <div>{{body}}</div>
      </article>
      {{/comments}}
    </div>
    <article class="logged-in">
      <h4>Jätä oma kommenttisi</h4>
      {{^comments}}
      <p>Kirjoita ensimmäinen kommentti</p>
      {{/comments}}
      <form class=" edit-form" id="add-comment-form" method="post">
        <div>
          <label>Otsikko</label>
          <input id="comment-title" name="title" class="required" placeholder="Otsikko" value="Re: {{title}}"></input>
          <em class="error comment-title-required">Lisää otsikko</em>
        </div>
        <div>
          <label>Kommenttisi</label>
          <textarea id="comment-body" name="body" rows="10" cols="68" placeholder="Kommenttisi"></textarea>
          <em class="error comment-body-required">Kommentti tarvitaan</em>
        </div>
        <div>
          <label> </label>
          <a id="add-comment" class="button addComment">Kommentoi</a>
        </div>
      </form>
    </article>
    <article class="logged-out">
      To be decided
    </article>
</script>

<script id="summaryTemplate" type="text/html">
  <tr><td>{{sport}}</td><td>{{distance}}</td> <td>{{pace}}</td><td>{{duration}}</td><td>{{avghr}}</td><td>{{count}}</td>
</script>

<script id="sportsCreateTemplate" type="text/html">
  <option>Juoksu</option>
  {{#sports}}
  <option value="{{this}}">{{.}}</option>
  {{/sports}}
</script>
<script id="tagsCreateTemplate" type="text/html">
  {{#tags}}
  <option value="{{this}}">{{.}}</option>
  {{/tags}}
</script>
<script id="loggedInStylesTemplate" type="text/html">
  <style id="logged-in-styles" type="text/css">
    a[data-user="{{user}}"].delete {
      visibility: visible;
    }
  </style>
</script>
<body
</html>
